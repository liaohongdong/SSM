<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.liaohongdong.ssm.dao.UsersDao">
    <!-- 目的：为dao接口方法提供sql语句配置 -->
    <select id="findAll" resultType="Users">
        <!-- 具体的sql -->
        SELECT
            a.user_id,
            a.address_id,
            b.address_id "user_address.address_id",
            b.best_time "user_address.best_time"
        FROM
            users a
        INNER JOIN
            user_address b ON a.user_id = b.user_id
    </select>

    <!--<select id="findAll" resultType="Users">-->
        <!--&lt;!&ndash; 具体的sql &ndash;&gt;-->
        <!--SELECT-->
        <!--a.user_id,-->
        <!--a.username,-->
        <!--a.password,-->
        <!--a.qq,-->
        <!--a.wechat,-->
        <!--a.email,-->
        <!--a.mobile,-->
        <!--a.province,-->
        <!--a.city,-->
        <!--a.area,-->
        <!--a.address,-->
        <!--a.nickname,-->
        <!--a.level,-->
        <!--a.order,-->
        <!--a.sex,-->
        <!--a.birthday,-->
        <!--a.user_money,-->
        <!--a.frozen_money,-->
        <!--a.pay_points,-->
        <!--a.rank_points,-->
        <!--a.address_id,-->
        <!--a.reg_time,-->
        <!--a.last_login,-->
        <!--a.last_time,-->
        <!--a.last_ip,-->
        <!--a.is_special,-->
        <!--a.parent_id,-->
        <!--a.falg,-->
        <!--a.is_validated,-->
        <!--a.max_consumption,-->
        <!--a.vip_1,-->
        <!--a.vip_2,-->
        <!--a.vip_3,-->
        <!--a.vip_4,-->
        <!--a.vip_5,-->
        <!--a.vip_6,-->
        <!--b.address_id "UserAddress.addressId",-->
        <!--b.address_name "UserAddress.addressName",-->
        <!--b.user_id "UserAddress.userId",-->
        <!--b.consignee "UserAddress.consignee",-->
        <!--b.email "UserAddress.email",-->
        <!--b.country "UserAddress.country",-->
        <!--b.province "UserAddress.province",-->
        <!--b.city "UserAddress.city",-->
        <!--b.area "UserAddress.area",-->
        <!--b.address "UserAddress.address",-->
        <!--b.mobile "UserAddress.mobile",-->
        <!--b.best_time "UserAddress.best_time",-->
        <!--FROM-->
        <!--users a-->
        <!--INNER JOIN-->
        <!--user_addresss b ON a.address_id = b.address_id-->
        <!--WHERE-->
        <!--a.address_id = #{addressId}-->
    <!--</select>-->

    <select id="queryAll" resultType="Book">
        SELECT book_id, name, number FROM book ORDER BY book_id  limit #{offset}, #{limit}
    </select>

    <update id="reduceNumber">
        UPDATE book SET number = number - 1 WHERE book_id = #{bookId} AND number > 0
    </update>
</mapper>